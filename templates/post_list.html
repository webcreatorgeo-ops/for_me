<!DOCTYPE html>
<html lang="ka">
<head>

    {% include 'base.html' %}
    <meta charset="UTF-8">
    <title>📚 ბლოგ პოსტები</title>
     <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light text-dark">
<div class="container mt-5">
    <h1 class="mb-4">📚 ბლოგ პოსტები</h1>

    <!-- ძებნის ფორმა -->
    <form method="POST" action="{{ url_for('search_posts') }}" class="mb-4 d-flex justify-content-center">
        <input type="text" name="search" class="form-control w-50" placeholder="ძებნა პოსტებში..." value="{{ search_query or '' }}">
        <button type="submit" class="btn btn-primary ms-2">🔍 ძებნა</button>
    </form>

    {% for post in posts %}
    <div class="card mb-4 shadow-sm">
        <div class="row g-0">
            {% if post.image_url %}
            <div class="col-md-4">
                <img src="{{ post.image_url }}" class="img-fluid rounded-start" style="width: 100%; max-height: 300px; object-fit: cover;" alt="პოსტის სურათი">
            </div>
            {% endif %}
            <div class="col-md-8">
                <div class="card-body">
                    <h5 class="card-title">{{ post.title }}</h5>
                    <p class="text-muted">{{ post.created_at.strftime('%Y-%m-%d') }}</p>
                    <a href="{{ url_for('view_post', post_id=post.id) }}" class="btn btn-outline-primary btn-sm">📖 წაიკითხე მეტი</a>

                    {% if session.get('is_admin') %}
                        <a href="{{ url_for('edit_post', post_id=post.id) }}" class="btn btn-warning btn-sm">✏️ რედაქტირება</a>
                        <a href="{{ url_for('delete_post', post_id=post.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('დარწმუნებული ხარ, რომ გინდა წაშლა?');">🗑️ წაშლა</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="alert alert-info">პოსტი ვერ მოიძებნა.</div>
    {% endfor %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</div>
</body>
</html>
