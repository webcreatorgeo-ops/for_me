<!DOCTYPE html>
<html lang="ka">
<head>
  <meta charset="UTF-8">
  <title>#33-ე საჯარო სკოლა</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="33-ე საჯარო სკოლის ოფიციალური საიტი - სიახლეები, ბლოგ პოსტები და ფოტოები.">
  <meta name="keywords" content="33-ე სკოლა, ქუთაისი, განათლება, ბლოგი, სტუდენტები">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet">

  <style>
  body {
    font-family: 'Poppins', sans-serif;
    background-color: #f8f9fa;
    color: #212529;
  }

  /* კარუსელის ღილაკები */
  .carousel-buttons {
    position: absolute;
    top: calc(50% + 170px);
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
    display: flex;
    gap: 3px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .btn-carousel {
    background: linear-gradient(135deg, #43a047, #2e7d32);
    border: none;
    padding: 20px 30px;
    border-radius: 10px;
    color: white;
    font-size: 24px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    box-shadow: 0 8px 20px rgba(46, 125, 50, 0.3);
    transition: all 0.4s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .btn-carousel:hover {
    background: linear-gradient(135deg, #1565c0, #42a5f5);
    transform: translateY(-4px) scale(1.05);
    box-shadow: 0 12px 28px rgba(21, 101, 192, 0.4);
    color: white;
  }

  /* ბლოგის ბარათები */
  .card {
    border-radius: 15px;
    border: none;
    overflow: hidden;
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 25px rgba(0,0,0,0.15);
  }

  .card-body h5 {
    font-weight: 700;
    color: #2e7d32;
  }
  </style>
</head>

<body class="bg-light text-dark">

<!-- ნავბარი -->
{% include 'base.html' %}

<!-- კარუსელი -->
<div id="carouselExampleIndicators" class="carousel slide position-relative" data-bs-ride="carousel" data-bs-interval="3000">
  <div class="carousel-inner" style="height: 370px;">
    {% for img in images %}
    <div class="carousel-item {% if loop.first %}active{% endif %}">
      <img src="{{ url_for('static', filename='carousel/' + img) }}" class="d-block w-100 h-100" alt="სლაიდი {{ loop.index }}">
    </div>
    {% endfor %}
  </div>

  <!-- ღილაკები კარუსელზე -->
  <div class="carousel-buttons">
    <a href="/archevani" class="btn btn-carousel">📖 ფუნქციები</a>
    <a href="/teachers" class="btn btn-carousel">🏫 სკოლის პერსონალი</a>
  </div>

  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<!-- ბლოგ პოსტები -->
<div class="container mt-5">
  <h1 class="mb-4">📚 ბლოგ პოსტები</h1>

  <!-- ძებნის ფორმა -->
  <form method="POST" action="{{ url_for('search_posts') }}" class="mb-4 d-flex justify-content-center">
    <input type="text" name="search" class="form-control w-50" placeholder="ძებნა პოსტებში..." value="{{ search_query or '' }}">
    <button type="submit" class="btn btn-primary ms-2">🔍 ძებნა</button>
  </form>

  {% for post in posts %}
  <div class="card mb-4">
    <div class="row g-0">
      {% if post.image_url %}
      <div class="col-md-4">
        <img src="{{ post.image_url }}" class="img-fluid rounded-start" style="width: 100%; max-height: 300px; object-fit: cover;" alt="პოსტის სურათი">
      </div>
      {% endif %}
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title">{{ post.title }}</h5>
          <p class="text-muted">{{ post.created_at.strftime('%Y-%m-%d') }}</p>
          <a href="{{ url_for('view_post', post_id=post.id) }}" class="btn btn-outline-primary btn-sm">📖 წაიკითხე მეტი</a>

          {% if session.get('is_admin') %}
            <a href="{{ url_for('edit_post', post_id=post.id) }}" class="btn btn-warning btn-sm">✏️ რედაქტირება</a>
            <a href="{{ url_for('delete_post', post_id=post.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('დარწმუნებული ხარ, რომ გინდა წაშლა?');">🗑️ წაშლა</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  {% else %}
  <div class="alert alert-info">პოსტი ვერ მოიძებნა.</div>
  {% endfor %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>

<!-- Footer -->
{% include 'footer.html' %}

</body>
</html>
